<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Luca’s Bread</title>
  <meta content="" name="description">
  <meta content="" name="keywords">


  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">


  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">


</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top ">
    <div class="container d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>

      
      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="#Home">Home</a></li>
          <li><a class="nav-link scrollto" href="#about">About us</a></li>
          <li><a class="nav-link scrollto" href="#services">Careers</a></li>
          <li><a class="nav-link scrollto " href="#portfolio">Order online</a></li>
          <li><a class="nav-link scrollto" href="#team">Contact Us</a></li>  
          <li><a class="nav-link scrollto" href="#contact">Register</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <!-- ======= Home Section ======= -->
  <section id="Home">
    <div class="Home-container">
      <h3>Welcome to <strong>Luca’s Loaves</strong></h3>
      <h1>Get to know us from here</h1>
      <h2>The Luca’s bread offers a large amount of choice and high quality of Sourdough Bread and Desserts.
        We lovingly make a fine selection of delicious and special breads, sandwiches and other desserts 
        in our Bakery. We also have many types of drinks and several combos. We are trying to focus 
        on the culture thing and healthy diet.</h2>
      <a href="#about" class="btn-get-started scrollto">Get Started</a>
    </div>
  </section>
  <!-- End Home -->

  <main id="main">

    <!-- ======= 二 Section ======= -->
    <section id="about" class="about">
      <div class="container">

        <div class="section-title">
          <h2>About</h2>
          <h3>Learn More <span>About Us</span></h3>
          <p style="color:rgb(255, 255, 255)">Learn the origin and manufacturing process of each bread through the following interface.</p>
        </div>

        <div class="row content">
          <div class="col-lg-6">
              <ul style="color:rgb(255, 255, 255)">
              <li><i class="ri-check-double-line"></i> RECIPES<br>Be inspired with our delicious recipes. They are sure to be an easy hit amongst family and friends.</li>
              <li><i class="ri-check-double-line"></i> FOR US<br>We are committed to ensuring that every bread, roll of bread and bun is a pleasant baking, eating and delivery experience.</li>
              
            </ul>
          </div>
          <div class="col-lg-6 pt-4 pt-lg-0">
            <p style="color:rgb(255, 255, 255)">
              Luca commenced his career as a lifeguard but was laid off. He found he enjoyed making bread and experimented and in no time at all had built up a thriving business.
            </p>
            <p style="color:rgb(255, 255, 255)">
              Our experienced bakery expert will show you how to make best Sourdough bread. 
          Join us on  First Saturday of every month.
          9 am to 5 pm with lunch provided. Learn to make your own bread $350 plus GST.  
            </p>
            <a href="#" class="btn-learn-more">Learn More</a>
          </div>
        </div>

      </div>
    </section>
    <!-- End 二 Section -->



    <!-- ======= 三 Section ======= -->
    <section id="services" class="services">
      <div class="container">

        <div class="section-title">
          <h2>RECRUIT</h2>
          <h3>We do offer awesome <span>Positions</span></h3>
          <p style="color:rgb(255, 255, 255)">We are expanding our branches and regularly need experienced bakers.</p>
        </div>
    <section id="contact1" class="contact1">
      <div class="container">


        <div class="row mt-5">

          <div class="col-lg-4">
            <div class="info">
              <div class="address">
                <i class="bi bi-geo-alt"></i>
                <h4>Location:</h4>
                <p>EamilAddress and your name</p>
              </div>

              <div class="email">
                <i class="bi bi-envelope"></i>
                <h4>Email:</h4>
                <p>info@example.com</p>
              </div>

              <div class="phone">
                <i class="bi bi-phone"></i>
                <h4>Work experience:</h4>
                <p>Describe your previous work experience</p>
              </div>

            </div>

          </div>

          <div class="col-lg-8 mt-5 mt-lg-0">

            <form action="forms/contact.php" method="post" role="form" class="php-email-form">
              <div class="row">
                <div class="col-md-6 form-group">
                  <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" required>
                </div>
                <div class="col-md-6 form-group mt-3 mt-md-0">
                  <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required>
                </div>
              </div>
              <div class="form-group mt-3">
                <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" required>
              </div>
              <div class="form-group mt-3">
                <textarea class="form-control" name="message" rows="5" placeholder="Message" required></textarea>
              </div>
              <div class="my-3">
                <div class="loading">Loading</div>
                <div class="error-message"></div>
                <div class="sent-message">Your message has been sent. Thank you!</div>
              </div>
              <div class="text-center"><button type="submit">Send Message</button></div>
            </section>
              <!-- upload Section -->
       <br>
       <div align="center">
              <p> <form action="file_upload.php" method="POST"
                enctype="multipart/form-data">
                Select files to upload:
            
                <input type="file" name="files[]" multiple>
                <input type="file" name="files[]" multiple>

            </p></form>
          </div>

        </section>
          <!-- END upload Section -->
          <!-- ======= END 三 Section ======= -->


    <!-- ======= Order online Section ======= -->


    <?php
    session_start();

    // Check if the user is logged in, if not then redirect him to login page
    if(!isset($_SESSION["loggedin"]) || $_SESSION["loggedin"] !== true){
        header("location: login.php");
        exit;
    }
    
    include 'DBController.php';
    require_once("dbcontroller.php");
    $db_handle = new DBController();
    if(!empty($_GET["action"])) {
    switch($_GET["action"]) {
      case "add":
        if(!empty($_POST["quantity"])) {
          $productByCode = $db_handle->runQuery("SELECT * FROM tblproduct WHERE code='" . $_GET["code"] . "'");
          $itemArray = array($productByCode[0]["code"]=>array('name'=>$productByCode[0]["name"], 'code'=>$productByCode[0]["code"], 'quantity'=>$_POST["quantity"], 'price'=>$productByCode[0]["price"], 'image'=>$productByCode[0]["image"]));
          
          if(!empty($_SESSION["cart_item"])) {
            if(in_array($productByCode[0]["code"],array_keys($_SESSION["cart_item"]))) {
              foreach($_SESSION["cart_item"] as $k => $v) {
                  if($productByCode[0]["code"] == $k) {
                    if(empty($_SESSION["cart_item"][$k]["quantity"])) {
                      $_SESSION["cart_item"][$k]["quantity"] = 0;
                    }
                    $_SESSION["cart_item"][$k]["quantity"] += $_POST["quantity"];
                  }
              }
            } else {
              $_SESSION["cart_item"] = array_merge($_SESSION["cart_item"],$itemArray);
            }
          } else {
            $_SESSION["cart_item"] = $itemArray;
          }
        }
      break;
      case "remove":
        if(!empty($_SESSION["cart_item"])) {
          foreach($_SESSION["cart_item"] as $k => $v) {
              if($_GET["code"] == $k)
                unset($_SESSION["cart_item"][$k]);				
              if(empty($_SESSION["cart_item"]))
                unset($_SESSION["cart_item"]);
          }
        }
      break;
      case "empty":
        unset($_SESSION["cart_item"]);
      break;	
    }
    }
    ?>


    <link href="style.css" rel="stylesheet" type="text/css" media="all" />

    <link href="style2.css" rel="stylesheet" type="text/css">


<div style="color:rgb(255, 255, 255)">
    <section id="portfolio" class="portfolio">

      <div class="container">

        <div class="section-title">
          <h2>Order online
          </h2>
          <h3>Choose your favorite<span>bread</span></h3>
          <p>You can select the products you want through the shopping cart and other functions below.</p>
        </div>

        
        a href="logout" class="button3">Sign Out of Your Account</a>
        <div class="wrapper">
        <div id="shopping-cart">
        <div class="txt-heading">Shopping Cart</div>
        
        <a id="btnEmpty" href="orderonline.php?action=empty">Empty Cart</a>
        <?php
        if(isset($_SESSION["cart_item"])){
            $total_quantity = 0;
            $total_price = 0;
        ?>	
        <table class="tbl-cart" cellpadding="10" cellspacing="1">
        <tbody>
        <tr>
        <th style="text-align:left;">Name</th>
        <th style="text-align:left;">Code</th>
        <th style="text-align:right;" width="5%">Quantity</th>
        <th style="text-align:right;" width="10%">Unit Price</th>
        <th style="text-align:right;" width="10%">Price</th>
        <th style="text-align:center;" width="5%">Remove</th>
        </tr>	
        <?php		
            foreach ($_SESSION["cart_item"] as $item){
                $item_price = $item["quantity"]*$item["price"];
            ?>
                <tr>
                <td><img src="<?php echo $item["image"]; ?>" class="cart-item-image" /><?php echo $item["name"]; ?></td>
                <td><?php echo $item["code"]; ?></td>
                <td style="text-align:right;"><?php echo $item["quantity"]; ?></td>
                <td  style="text-align:right;"><?php echo "$ ".$item["price"]; ?></td>
                <td  style="text-align:right;"><?php echo "$ ". number_format($item_price,2); ?></td>
                <td style="text-align:center;"><a href="orderonline.php?action=remove&code=<?php echo $item["code"]; ?>" class="btnRemoveAction"><img src="icon-delete.png" alt="Remove Item" /></a></td>
                </tr>
                <?php
                $total_quantity += $item["quantity"];
                $total_price += ($item["price"]*$item["quantity"]);
            }
            ?>
        
        <tr>
        <td colspan="2" align="right">Total:</td>
        <td align="right"><?php echo $total_quantity; ?></td>
        <td align="right" colspan="2"><strong><?php echo "$ ".number_format($total_price, 2); ?></strong></td>
        <td></td>
        </tr>
        </tbody>
        </table>		
          <?php
        } else {
        ?>
        <div class="no-records">Your Cart is Empty</div>
        <?php 
        }
        ?>
        </div>
        
        <div id="product-grid">
          <div class="txt-heading">Products</div>
          <?php
          $product_array = $db_handle->runQuery("SELECT * FROM tblproduct ORDER BY id ASC");
          if (!empty($product_array)) { 
            foreach($product_array as $key=>$value){
          ?>
          
            <div class="image">
              
              <div class="image"><img src="<?php echo $product_array[$key]["image"]; ?>"/>
              <button class="quick_look" data-id="<?php echo $product_array[$key]["id"] ; ?>">Quick Look</button>
              </div>
              <form method="post" action="orderonline.php?action=add&code=<?php echo $product_array[$key]["code"]; ?>">
              <div class="product-tile-footer">
              <div class="product-title"><?php echo $product_array[$key]["name"]; ?></div>
              <div class="product-price"><?php echo "$".$product_array[$key]["price"]; ?></div>
              <div class="cart-action"><input type="text" class="product-quantity" name="quantity" value="1" size="2" /><input type="submit" value="Add to Cart" class="btnAddAction" /></div>
              </div>
              
              </form>
              
            </div>
          <?php
            }
          }
          
          ?>
        </div>
        </div>	
        
            <div id="demo-modal"></div>
        
            <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        
            <script>
            $(".quick_look").on("click", function() {
                var product_id = $(this).data("id");
                  var options = {
                      modal: true,
                      height: 'auto',
                      width:'70%'
                    };
                  $('#demo-modal').load('get-product-info.php?id='+product_id).dialog(options).dialog('open');
            });
        
            $(document).ready(function() {
                  $(".image").hover(function() {
                        $(this).children(".quick_look").show();
                    },function() {
                         $(this).children(".quick_look").hide();
                    });
            });
            </script>


    </section><!-- End Order online Section -->

    

    <!-- ======= Contact Us Section ======= -->
    <section id="team" class="team">
      <div class="container">

        <div class="section-title">
          <h2 style="color:rgba(25, 169, 231, 0.859)">Contact Us
          </h2>
          <h3 style="color:rgba(25, 169, 231, 0.859)">Our Hardworking <span>Team</span></h3>
          <p style="color:rgba(25, 169, 231, 0.859)">Ut possimus qui ut temporibus culpa velit eveniet modi omnis est adipisci expedita at voluptas atque vitae autem.</p>
      <br>


				
				<p align="center" style="color:rgba(25, 169, 231, 0.859)">36 Garden Ave, Mullumbimby NSW 2482 </p>
                <img src='map.jpg' width="1400", height="700";></div>

              </div>
      
    </section><!-- End Contact Section -->

    <!-- ======= Register Section ======= -->


    <?php
    // Include config file
    require_once "config.php";
     
    // Define variables and initialize with empty values
    $name = $address = $salary620 = $username = $password ="";
    $name_err = $address_err = $salary620_err = $username_err =$password_err ="";
     
    // Processing form data when form is submitted
    if($_SERVER["REQUEST_METHOD"] == "POST"){
        // Validate name
        $input_name = trim($_POST["name"]);
        if(empty($input_name)){
            $name_err = "Please enter a name.";
        } elseif(!filter_var($input_name, FILTER_VALIDATE_REGEXP, array("options"=>array("regexp"=>"/^[a-zA-Z\s]+$/")))){
            $name_err = "Please enter a valid name.";
        } else{
            $name = $input_name;
        }
        
        // Validate address
        $input_address = trim($_POST["address"]);
        if(empty($input_address)){
            $address_err = "Please enter an address.";     
        } else{
            $address = $input_address;
        }
        
        // Validate salary620
        $input_salary620 = trim($_POST["salary620"]);
        if(empty($input_salary620)){
            $salary620_err = "Please enter the salary620 amount.";     
        } elseif(!ctype_digit($input_salary620)){
            $salary620_err = "Please enter a positive integer value.";
        } else{
            $salary620 = $input_salary620;
        }
    
        // Validate username
    if(empty(trim($_POST["username"]))){
        $username_err = "Please enter a username.";
    } elseif(!preg_match('/^[a-zA-Z0-9_]+$/', trim($_POST["username"]))){
        $username_err = "Username can only contain letters, numbers, and underscores.";
    } else{
        // Prepare a select statement
        $sql = "SELECT id FROM employees WHERE username = ?";
        
        if($stmt = mysqli_prepare($link, $sql)){
            // Bind variables to the prepared statement as parameters
            mysqli_stmt_bind_param($stmt, "s", $param_username);
            
            // Set parameters
            $param_username = trim($_POST["username"]);
            
            // Attempt to execute the prepared statement
            if(mysqli_stmt_execute($stmt)){
                /* store result */
                mysqli_stmt_store_result($stmt);
                
                if(mysqli_stmt_num_rows($stmt) == 1){
                    $username_err = "This username is already taken.";
                } else{
                    $username = trim($_POST["username"]);
                }
            } else{
                echo "Oops! Something went wrong. Please try again later.";
            }
    
            // Close statement
            mysqli_stmt_close($stmt);
        }
    }
    
    // Validate confirm password
    if(empty(trim($_POST["password"]))){
        $password_err = "Please confirm password.";     
    } else{
        $password = trim($_POST["password"]);
        if(empty($password_err) && ($password != $password)){
            $password_err = "Password did not match.";
        }
    }
     
        
        // Check input errors before inserting in database
        if(empty($name_err) && empty($address_err) && empty($salary620_err)&& empty($username_err)&& empty($password_err)){
            // Prepare an insert statement
            $sql = "INSERT INTO employees (name, address, salary620, username, password) VALUES (?, ?, ?, ?, ?)";
             
            if($stmt = mysqli_prepare($link, $sql)){
                // Bind variables to the prepared statement as parameters
                mysqli_stmt_bind_param($stmt, "ssiss", $param_name, $param_address, $param_salary620, $param_username, $param_password);
                
                // Set parameters
                $param_name = $name;
                $param_address = $address;
                $param_salary620 = $salary620;
                $param_username = $username;
                $param_password = $password;
                
                // Attempt to execute the prepared statement
                if(mysqli_stmt_execute($stmt)){
                    // Records created successfully. Redirect to landing page
                    header("location: register2.php");
                    exit();
                } else{
                    echo "Oops! Something went wrong. Please try again later.";
                }
            }
             
            // Close statement
            mysqli_stmt_close($stmt);
        }
        
        // Close connection
        mysqli_close($link);
    }
    ?>
    


    <section id="contact" class="contact">
      <div class="container">

        <div class="section-title">
          <h2>Register
          </h2>
          <h3><span>Create Record</span></h3>
          <p>Please fill this form and submit to add employee record to the database.</p>
        </div>


        <form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>" method="post">
          <div class="form-group">
              <label for="fname">Name</label>
              <input type="text" name="name" class="form-control <?php echo (!empty($name_err)) ? 'is-invalid' : ''; ?>" value="<?php echo $name; ?>">
              <span class="invalid-feedback"><?php echo $name_err;?></span>
          </div>
          <div class="form-group">
              <label for="fname">Address</label>
              <input type="text" name="address" class="form-control <?php echo (!empty($address_err)) ? 'is-invalid' : ''; ?>" value="<?php echo $address; ?>">
              <span class="invalid-feedback"><?php echo $address_err;?></span>
          </div>
          <div class="form-group">
              <label for="fname">salary</label>
              <input type="text" name="salary620" class="form-control <?php echo (!empty($salary620_err)) ? 'is-invalid' : ''; ?>" value="<?php echo $salary620; ?>">
              <span class="invalid-feedback"><?php echo $salary620_err;?></span>
          </div>
          <div class="form-group">
              <label for="fname">Username</label>
              <input type="text" name="username" class="form-control <?php echo (!empty($username_err)) ? 'is-invalid' : ''; ?>" value="<?php echo $username; ?>">
              <span class="invalid-feedback"><?php echo $username_err;?></span>
          </div>
          <div class="form-group">
              <label for="fname">Password</label>
              <input type="text" name="password" class="form-control <?php echo (!empty($password_err)) ? 'is-invalid' : ''; ?>" value="<?php echo $password; ?>">
              <span class="invalid-feedback"><?php echo $password_err;?></span>
          </div>
          <input type="submit" class="btn btn-primary" value="Submit">
      </form>

      </div>
    </section><!-- End Register      Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6 footer-contact">
            <h3>Luca’s Loaves
            </h3>
            <p>
              36 Garden Ave<br>
              Mullumbimby NSW 2482<br>
              <br><br>
              <strong>Phone:</strong> +86 18858068977<br>
              <strong>Email:</strong> Luca'sbread@qq.com<br>
            </p>
          </div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Home</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">About us</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Careers</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Order online</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Contact Us
              </a></li>
            </ul>
          </div>

          <div class="col-lg-3 col-md-6 footer-links">
            <h4>Our Services</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Bread shop</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Self collection at the store</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Take-out food</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">New Bread Suggestions</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Contact</a></li>
            </ul>
          </div>

          <div class="col-lg-4 col-md-6 footer-newsletter">
            <h4>Join Luca's bread</h4>
            <p>If you have any questions about us, contact us</p>
            <form action="" method="post">
              <input type="email" name="email"><input type="submit" value="Subscribe">
            </form>
          </div>

        </div>
      </div>
    </div>

    <div class="container d-md-flex py-4">

      <div class="me-md-auto text-center text-md-start">
        <div class="copyright">
          &copy; Copyright <strong><span>Luca’s Bread</span></strong>. All Rights Reserved
        </div>
        <div class="credits">
          Designed by <a href="https://bootstrapmade.com/">Demorky(WuRonghua)20ITA1</a>
        </div>
      </div>
      <div class="social-links text-center text-md-right pt-3 pt-md-0">
        <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
        <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
        <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
        <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
        <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>